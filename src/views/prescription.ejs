<!--
 * Author: Will Rayner
 * Description: This page displays prescriptions and vaccinations for a user.
 * It includes forms for requesting more prescriptions and tables for displaying data.
 * Last Updated: [11/06/2024] by Will Rayner
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prescriptions</title>
    <!-- CSS files -->
    <link rel="stylesheet" href="/styles/prescription.css">
    <link rel="stylesheet" href="/styles/navbar.css">
    <!-- SweetAlert2 Library -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
</head>
<body>
    <!-- Include the navigation bar -->
    <%- include('partials/navbar') %>
    
    <div class="prescription-container">
        <h1>Prescriptions</h1>
        <div class="prescription-tab">
            <table>
                <thead>
                    <tr>
                        <th>Medication Name</th>
                        <th>Dosage</th>
                        <th>Frequency</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Action</th> 
                    </tr>
                </thead>
                <tbody>
                    <% prescriptions.forEach(prescription => { %>
                    <tr>
                        <td><%= prescription.medication_name %></td>
                        <td><%= prescription.dosage %></td>
                        <td><%= prescription.frequency %></td>
                        <td><%= prescription.start_date %></td>
                        <td><%= prescription.end_date %></td>
                        <td>
                            <!-- Form for requesting more prescriptions -->
                            <form class="prescription-form" action="/prescription/request" method="POST">
                                <input type="hidden" name="prescription_id" value="<%= prescription.prescription_id %>">
                                <button type="submit">Request More</button>
                            </form>
                        </td>
                    </tr>
                    <% }); %>
                </tbody>
            </table>
        </div>

        <h1>Vaccinations</h1>
        <div class="vaccination-tab">
            <table>
                <thead>
                    <tr>
                        <th>Vaccine Name</th>
                        <th>Vaccination Date</th>
                        <th>Dose</th>
                        <th>Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <% vaccinations.forEach(vaccination => { %>
                    <tr>
                        <td><%= vaccination.vaccine_name %></td>
                        <td><%= vaccination.vaccination_date %></td>
                        <td><%= vaccination.dose %></td>
                        <td><%= vaccination.notes %></td>
                    </tr>
                    <% }); %>
                </tbody>
            </table>
        </div>
    </div>

    <!-- JavaScript files -->
    <script src="/js/prescription.js"></script>
</body>
</html>
